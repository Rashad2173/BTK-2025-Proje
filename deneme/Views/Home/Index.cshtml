@model deneme.Models.HomeViewModel
@{
    ViewData["Title"] = "Ana Sayfa";
    Layout = "_Layout";
}
<div id="defaultContent">
    <!-- ──────────── Hero Slider (isteğe bağlı) ──────────── -->
    <section class="hero-slider mb-4">
        <!-- buraya slider html'in varsa koyabilirsin -->
    </section>

    <div class="container">

        

        <!-- ──────────── FLAŞ İNDİRİMLER ──────────── -->
        <section class="flash-sales mb-5">
            <h2 class="section-title fw-bold mb-4">
                <i class="fas fa-bolt text-warning me-2"></i>Flaş İndirimler
            </h2>

            <div class="row g-4">
                @foreach (var product in Model.FlashSaleProducts)
                {
                    <div class="col-lg-3 col-md-4 col-6">
                        <!-- Kartı tamamen anchor ile sarıyoruz -->
                        <a asp-controller="Product" asp-action="Details"
                           asp-route-id="@product.Id"
                           class="text-decoration-none text-dark">

                            <div class="product-card border rounded-3 overflow-hidden h-100 hover-lift">

                                <!-- Görsel + indirim rozeti -->
                                <div class="product-image position-relative">
                                    <img src="@product.ImageUrl" alt="@product.Name" class="img-fluid w-100" />
                                    @if (product.DiscountPercentage > 0)
                                    {
                                        <div class="discount-badge position-absolute top-0 start-0 bg-danger text-white px-2 py-1 m-2 rounded">
                                            %@product.DiscountPercentage
                                        </div>
                                    }
                                </div>

                                <!-- Ürün bilgisi -->
                                <div class="product-info p-3">
                                    <h6 class="product-title mb-2">@product.Name</h6>

                                    <span class="fw-bold text-danger fs-5">
                                        @product.Price.ToString("C", new System.Globalization.CultureInfo("tr-TR"))
                                    </span>

                                    @if (product.OldPrice.HasValue)
                                    {
                                        <span class="text-muted text-decoration-line-through ms-2">
                                            @product.OldPrice.Value.ToString("C", new System.Globalization.CultureInfo("tr-TR"))
                                        </span>
                                    }
                                </div>
                            </div>
                        </a>
                    </div>
                }
            </div>
        </section>

        <!-- ──────────── POPÜLER ÜRÜNLER ──────────── -->
        <section class="popular-products mb-5">
            <h2 class="section-title fw-bold mb-4">
                <i class="fas fa-fire text-danger me-2"></i>Popüler Ürünler
            </h2>

            <div class="row g-4">
                @foreach (var product in Model.PopularProducts)
                {
                    <div class="col-lg-2 col-md-3 col-6">
                        <a asp-controller="Product" asp-action="Details"
                           asp-route-id="@product.Id"
                           class="text-decoration-none text-dark">

                            <div class="product-card border rounded-3 overflow-hidden h-100 hover-lift">
                                <img src="@product.ImageUrl" alt="@product.Name" class="img-fluid w-100" />

                                <div class="product-info p-2">
                                    <h6 class="product-title small mb-1">@product.Name</h6>
                                    <span class="fw-bold text-primary">
                                        @product.Price.ToString("C", new System.Globalization.CultureInfo("tr-TR"))
                                    </span>
                                </div>
                            </div>
                        </a>
                    </div>
                }
            </div>
        </section>

   
    </div>

</div>


<!-- Sağ altta AI widget butonu -->
<div id="aiFloatToggleBtn" class="ai-assistant-float" style="position: fixed; bottom: 24px; right: 24px; z-index: 9999;">
    <button class="btn btn-primary rounded-circle" style="width:60px; height:60px; font-size:2rem;">
        <i class="fas fa-robot"></i>
    </button>
</div>

<!-- Açılır AI paneli -->
<div id="aiChatPopup" class="ai-assistant-float" style="display:none; position: fixed; bottom: 100px; right: 24px; width: 350px; z-index: 10000;">
    <div class="card shadow-lg">
        <div class="card-header d-flex justify-content-between align-items-center">
            <span><i class="fas fa-robot me-2"></i>AI Kombin Asistanı</span>
            <button id="aiFloatCloseBtn" class="btn btn-sm btn-light">&times;</button>
        </div>
        <div class="card-body">
            <form id="popupOutfitForm">
                <div class="mb-3">
                    <input type="file" id="popupClothingImage" accept="image/*" class="form-control" required>
                    <div id="popupImagePreview" class="mt-2 d-none">
                        <img id="popupPreviewImg" src="" alt="Önizleme" class="img-thumbnail" style="max-width: 120px;">
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Durum:</label><br>
                    <input type="radio" name="popupOccasion" value="Günlük" checked> Günlük
                    <input type="radio" name="popupOccasion" value="İş"> İş
                    <input type="radio" name="popupOccasion" value="Parti"> Parti
                    <input type="radio" name="popupOccasion" value="Spor"> Spor
                </div>
                <button type="submit" class="btn btn-primary w-100">Kombin Öner</button>
                <div id="popupLoadingState" class="d-none mt-2 text-center">
                    <div class="spinner-border text-primary" role="status"></div>
                </div>
                <div id="popupSuggestionResult" class="d-none mt-3">
                    <div id="popupSuggestionContent"></div>
                </div>
            </form>
        </div>
    </div>
</div>

